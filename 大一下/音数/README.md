# 导论
## 节奏, 旋律, 和声是音乐三大要素
### 节奏
#### 单拍子与复拍子
不可分的拍子(如二拍子, 三拍子)称为单拍子, 单拍子一般一小节内只有一个重音.

可分成某一种单拍子的重复的拍子(如四拍子, 六拍子)称为复拍子, 复拍子一般一小节内有多个重音.

    素数拍一定不可分

#### 极大均衡原则
在所有的拍子上, 节奏的起拍最好均匀分布.

#### 节奏奇性
在节奏型的圆周表示中, 如果不存在两个起拍互为对径点, 则称为节奏奇性的.

这个"奇性"代表着节奏型无法被二分成两个一前一后循环重复的子节奏型.

#### 距离序列
在节奏型的圆周表示中, 所有的相邻的两个起拍之距离称为距离序列.

列首为第1起拍到第2起拍的距离, 然后依时间顺序排列.

如古巴颂乐:

![古巴颂乐](https://github.com/zhuiyy/zhuiyy/blob/main/picture%20bands/%E5%8F%A4%E5%B7%B4%E9%A2%82%E4%B9%90.png)

#### 轮廓
对于一个距离序列 $[a_{1} ,a_{2}, a_{3}, a_{4}, ..., a_{n}]$ , 定义其轮廓为

$$[a_{i + 1} - a{i}的符号(0代表a_{i+ 1} = a_{i})]_{i = 1, 2, ..., n(a_{n + 1} = a_{1})}$$

如古巴颂乐的距离序列:
$$[3,3,4,2,4]$$

其轮廓为:
$$[0, +, -, +, -]$$

称两个节奏型为**轮廓同构**的, 若二者轮廓在循环位移后相同.

#### 影子
在节奏型的圆周表示中, 所有相邻的两个起拍之中点, 构成影子节拍, 也可定义其距离序列与轮廓.

如古巴颂乐的影子距离序列为:
$$[3, 3.5, 3, 3, 3.5]$$
即为原距离序列的相邻项平均

古巴颂乐影子序列的轮廓为:
$$[+, -, 0, +, -]$$

    注:古巴颂乐的节奏与其影子序列是轮廓同构的.

# 音乐基础
## 声压水平
定义:
$$L_{p} = 20log_{10}({p \over p_{0}})$$
其中$P_{0}$为$1000Hz$下人耳的听觉下限阈值, $20\mu Pa$, $p$为实际声压

声压水平的单位为分贝$dB$.

    注意: 其实对于不同频率的声音, 我们的听觉下限阈值是不一样的.

## 波形
振幅包络: ADSR (Attack, Decay, Sustain, Release)

## 乐音体系
### 音级
基本音级: CDEFGAB

变化音级: 基本音级 + 变音记号

等音: bF与E等音

### 唱名
do re mi fa sol la ti
#### 固定唱名与首调唱名

## 记谱法
### 音符记号
注意: 全休止符贴上线, 二分休止贴下线.
### 谱号
中音谱号(C谱号)

    置于三线时, 三线为中央C(中音谱表)
    置于四线时, 四线为中央C(次中音谱表)
## 音程
两个音级的关系

上方称为上方音,冠音; 下方称为下方音, 根音.

先后发声, 称为旋律音程; 同时发声, 称为和声音程.

音程名称由两个指标唯一决定, 缺一不可: 度数与半音数.

![音程图](https://github.com/zhuiyy/zhuiyy/blob/main/picture%20bands/%E9%9F%B3%E7%A8%8B%E5%9B%BE.jpg)

### 自然音程与变化音程

**注意, 以下内容与上图有出入, 以文字为准**

自然音程: 上图中所有高亮音程, **以及增四度, 减五度**

变化音程: 余下音程(可由自然音程+-半音得到)

### 协和音程与不协和音程
协和音程: 大小三度, 纯四度, 纯五度, 大小六度, 纯八度

不协和音程: 其余

    协和音程可以再分:
        完全协和音程: 纯四度, 纯五度, 纯八度
        不完全协和音程:大小三度, 大小六度

#### 协和理论
毕达哥拉斯: 频率之比越简单, 越协和

    五度: 3/2
    四度: 4/3
    三度: 5/4

赫尔姆霍兹: 拍音理论(和差化积):
$$频率为\omega_{1}与\omega_{2}的声音叠加, 产生的每秒拍音数为\delta = |\omega_{1}-\omega_{2}|$$ 
    赫尔姆霍兹认为不含拍音则协和, 事实上这个理论很有缺陷.

# 振动
抽象化模型: 一条均匀细弦, 长度为L, 张力为T, 线密度为$\rho$

振动满足边值条件: 首尾两点无振动.

## 振动的解
振动的解是一系列小的振动:
$$u(x, t) = \sum_{n=1}^{\infty}u_{n}(x, t)$$
其中
$$u_{n}(x, t) = \sqrt{a_{n}^{2} + b_{n}^{2}}sin(\omega_{n}t + \theta_{n})sin({{n\pi}\over{L}}x)$$
$$\omega_{n} = {{n\pi c}\over{L}}$$
称为和弦振动的第$n$个振动模态

其中
$$c_{2} = T/\rho$$
即得
$$f_{n} = {n \over 2L}\sqrt{T \over \rho}$$

特别的
$$f_{1} = {1 \over 2L}\sqrt{T \over \rho}$$
此即**Mersenne 定律**
## 泛音
弦振动频率
$$f_{1}, f_{2}, f_{3}, ...$$
称为弦的固有频率.
$f_{1}$称为基频, 相应的声音称为基音; 其余的频率称为泛频, 相应的声音称为泛音.

我们有
$$f_{n} = nf_{1}$$
记$f_{1} = f$, 则固有频率为
$$f, 2f, 3f, ...$$
称这个序列为泛音列

    注意:第n+1个振动模态称为第n泛音

### 波节与波腹
对于第n个振动模态, 在$x = kL/n$处振幅为0, 称为波节; 在$x = (2k+1)L/2n$处振幅最大, 称为波腹.

### 拨弦的泛音列
在一条弦1/2处拨弦, 由于对称性, 只会产生一半的泛音列(偶次泛音):
$$f, 3f, 5f, ...$$

### 轻按弦的泛音列
在一条弦1/2处轻按, 并拨动琴弦, 则正相反, 按弦强制1/2处产生波节, 因此只会产生另一半泛音列(奇次泛音):
$$2f, 4f, 6f, ...$$

#### 注, 在一般的位置拨弦, 会产生所有泛音.
## 管乐泛音
木管五重奏包括:长笛, 单簧管, 双簧管, 大管, 圆号(圆号是铜管, 但也被算进来了)

管乐中空气柱振动与弦振动的边值条件不同, 不满足两端振幅为0的条件.

如果管子一端封闭, 则空气柱无法在这里做纵波振动, 会形成波节; 而开放端可以自由振动, 形成波腹

考虑声音传播, 有
$$f = v/\lambda$$
其中$v$为声速

由上述建模, 两端都开的管称为开管, 其固有频率波长为:
$$\lambda_{n} = 2L/n$$
其中$L$为管长

于是开管的泛音列为:
$$f = v/2L, 2f, 3f, ...$$

一端自由一段封闭的管称为闭管, 其固有频率波长为:
$$\lambda_{n} = 4L/(2n-1)$$

泛音列为:
$$f = v/4L, 3f, 5f, ...$$

    长笛为开管, 单簧管近似为闭管

### 超吹 
超吹技法可以吹到可能的第一个泛音, 开管为高八度, 闭管为高十二度

### 泛音高:
    1, 1, 5, 1, 3, 5, b7, 1, 2, 3, #4, 5, 6, b7, 7, 1
# 律学
## 三分损益--管仲
三分损一与三分益一

站在弦长的角度看音高(弦长越长, 音高越低), 以下指标为弦长比例.

    宫 : 3*3*3*3 = 81
    || *4/3
    徵 : 3*3*3*2*2 = 108
    || *2/3
    商 : 3*3*2*2*2 = 72
    || *4/3
    羽 : 3*2*2*2*2*2 = 96
    || *2/3
    角 : 2*2*2*2*2*2 = 64

于是得到:

    徵(108), 羽(96), 宫(81), 商(72), 角(64)

调整后:

    宫(81), 商(72), 角(64), 徵(54), 羽(48)

    对应CDEGA

继续生成:

    角 : 2*2*2*2*2*2 = 64
    || *4/3
    变宫 约为85
    || *2/3
    变徵 约为57

调整后得到音阶

    宫(81), 商(72), 角(64), 变徵(512/9 = 57), 徵(54), 羽(48), 变宫(128/3 = 42), 清宫(81/2 = 40)

(清宫是比宫高八度的音)

此音阶称为雅乐音阶, 古音阶.
### 十二律--吕不韦
构成全音阶:

$$81, 54, 72, 48, 64, {2^{7}\over 3}, {2^{9}\over 3^{2}}, {2^{11}\over 3^{3}}, {2^{12}\over 3^{4}}, {2^{14}\over 3^{5}}, {2^{15}\over 3^{6}}, {2^{17}\over 3^{7}}$$  
对应**一个八度内**的

$$C, G, D, A, E, B, \#F, \#C, \#G, \#D, \#A, \#E$$
#### 旋宫不归
在#E后再做三分损一, 理论上应该得到高八度的C(清宫 = 81/2). 但实际结果为${2^{18}\over 3^{8}} = 0.49 \times 81 < 81/2$

即按三分损益法, 清宫音会比理论值稍微高一点.

## 五度相生--毕达哥拉斯
毕达哥拉斯的生律与管仲类似, 只不过是以频率的视角呈现.

假定C对应频率1:

$$1, {3 \over 2}, {3^{2}\over 2^{3}}, {3^{3}\over 2^{4}}, {3^{4}\over 2^{6}}, {3^{5}\over 2^{7}}, {3^{6}\over 2^{9}}, {3^{7}\over 2^{11}}, {3^{8}\over 2^{12}}, {3^{9}\over 2^{14}}, {3^{10}\over 2^{15}}, {3^{11}\over 2^{17}}$$
对应**一个八度内**的(一直×3/2, 如果高于2了就÷2)
$$C, G, D, A, E, B, \#F, \#C, \#G, \#D, \#A, \#E$$

虽然纯五度, 纯四度没有问题, 但三度如c-e音程, 不符合理想中的4:5
### 毕达哥拉斯音差
和旋宫不归一样, 五度相生产生的高音C也比理论值高.
$${3^{12}\over 2^{18}} = 1.0136 \times 2> 1 \times 2$$
$${3^{12}\over 2^{19}} = 1.0136$$
### 多声部音乐
复调音乐(对位法), 主调音乐
## 纯律--扎利诺等
重视三度和六度音程, 于是在五度相生中添加5/4等比率:

由三度, 四度, 五度关系得到(注意这里的生成方式**非常严格**):
$$C(1), E(5/4), F(4/3), G(3/2)$$
由DG四度, EA四度, EB五度关系得到余下的:
$$D(9/8), A(5/3), B(15/8)$$
### 纯律缺陷
1) D-A非3:2
2) 有两种不同的大二度(C-D 9/8, D-E 10/9)
3) **偕调音差**
    按照纯律, 同一个音在不同调式内音高可能不同:

    即纯五度链与大三度链存在偏差:

        向上纯五度 * 4次, 向下大三度 * 1次,  向下八度 * 2次, 所得的频率倍数为81/80 > 1

## 平均律--朱载堉(最早)
将一个八度分为12个半音:
$$f, \sqrt[12]{2}f, \sqrt[12]{2^{2}}f, \sqrt[12]{2^{3}}f, ..., \sqrt[12]{2^{11}}f$$

## 音分
两个音的频率为$f_{1}$, $f_{2}$, 则二者相差的音分数为:
$$1200log_{2}{f_{2}\over f_{1}}$$

故每个半音间差100音分, 每个八度间差1200音分.

## 绝对音高:
$$A_{4} = 440Hz$$
# 随机性
## 随机过程
$\{\xi_{t}|t=0,1,2,3...\}$成为一个随机过程，若所有随机变量$\xi_{t}$共享取值范围$\Omega$.

称$\Omega$为$\xi_{t}$的状态空间，$\Omega$中元素称为状态.

### 马尔可夫性质
若对于任意正整数$n$与$\Omega$中任意$n+2$个状态$k_{i}, i=0,1,2,...,n+1$，有
    
$P\{\xi_{n+1}=k_{n+1}|\xi_{i}=k_{i},\forall i\leqslant n\}=P\{\xi_{n+1}=k_{n+1}|\xi_{n}=k_{n}\}$

即$t=n+1$时刻的状态仅与上一时刻相关，就称这个随机过程有马尔可夫性质，具有马尔可夫性质的随机过程也叫马尔科夫链.

### 时间齐次性
一个马尔科夫链是时间齐次的，若对任意$t$，有

$P\{\xi_{t+2}=y|\xi_{t+1}=x\}=P\{\xi_{t+1}=y|\xi_{t}=x\},\forall x,y\in\Omega$

固定一组$k_{i},k_{j}\in \Omega$，记定值$p\{\xi_{t+1}=k_{j}|\xi_{t}=k_{i}\}$为$p_{ij}$，称作状态$\xi_{i}=k_{i}$到$\xi_{i+1}=k_{j}$的转移概率.

若$|\Omega|=n\in\mathbb{N}^{+}$即$\Omega=\{k_{1},k_{2},...,k_{n}\}$，则$\exist n$级方阵
$$P=(p_{ij})=
\left[
\begin{matrix}
p_{11} & p_{12} & ... & p_{1n} \\
p_{21} & p_{22} & ... & p_{2n} \\
\vdots & \vdots & ... & \vdots \\
p_{n1} & p_{n2} & ... & p_{nn}
\end{matrix}
\right]
$$
称为这个马尔科夫链的概率转移矩阵,显然由定义，知此矩阵每行和为1.

对于一个时间$t$，如果我们已知$\xi_{t}$的概率分布$\gamma_{t}=[p_{1},p_{2},...,p_{n}]^{T}$，则$\xi_{t+1}$的概率分布$\gamma_{t+1}=[p_{1},p_{2},...,p_{n}]P$.

### 高阶马尔科夫链
若将马尔可夫性质放宽为：$n+1$时刻状态仅与前$m$个状态相关，则称此马尔科夫链为$m$阶马尔科夫链.

事实上就是一个单层纯线性神经网络(非全连接)

## 随机音乐的功率谱
### 随机音乐的功率密度
在每个频率上，音乐的功率是一个时间的函数，记为$P_{f_{k}}(t)$，其中$f_{k}$是频段(连续的一段频率区间)，$t$是时间.

对于一段有限且离散的随机音乐，时间$t$仅取离散值，此时$P_{f_{k}}(t)$不是离散函数，我们干脆研究其均值，定义$P_{f_{k}}$为$P_{f_{k}}(t)$在有限时间内的均值. 

此时可以把$P_{f_{k}}$视为$f_{k}$的函数，我们采样多个$f_{k}$，并且令$|f_{k}|$趋近于0，类似概率与概率密度关系，我们得到一个频率值f的函数$P_{f}$，
称为此随机音乐的功率密度谱.

### 白、粉、棕噪声
当$P_{f}\propto{1\over f^{0}}$即$P_{f}$为常数时，此随机音乐称为白噪声

当$P_{f}\propto{1\over f^{1}}$时，称为粉噪声

当$P_{f}\propto{1\over f^{2}}$时，称为棕噪声(布朗噪声)

大量研究表明，生活中的音乐或声音，其频率功率谱大致都满足$P_{f}\propto{1\over f^{\gamma}},0.5<\gamma<1.5$.

### 功率计算
在一个区间内对功率密度谱积分，我们就能得到此区间内的总功率(类似概率密度与概率)

白噪声在一个区间带上的积分正比于带宽

粉噪声在任意八度($f$到$2f$)上积分为定值

### 如何产生1/f音乐

使用3个骰子ABC，每一次选择会按照一个规则投掷某些骰子.

规则是：***something really unimportant***


# 调式、音阶、和弦
## 调式
### 主音与调式
按照一定规则，围绕某一稳定音级形成的不同音程结构称为一个调式，中心稳定音称为主音。

### 标准循环调式
在一个八度内有的七个不同音级，顺序排列，由低到高称为上行，反之为下行，七个音以后按循环方式平移连接。

其七个不同音级对应：

    I:主音
    II:上主音
    III:中音
    IV:下属音
    V:属音
    VI:下中音
    VII:导音

### 自然大调
如CDEFGABC'

    其三和弦列为：大小小大大小减
### 自然小调
如ABC'D'E'F'G'A'

    三和弦列：小减大小小大大
### 和声小调
在自然小调的基础上将VII级音升高半音，如
ABC'D'E'F'G#'A'

    三和弦列：小减增小大大减
### 旋律小调
上行：在和声小调的基础上把VI级音升高半音，如ABC'D'E'F#'G#'A'

    上行三和弦列：小小增大大减减

下行：恢复为自然小调，如A'G'F'E'D'C'BA

旋律小调的上行前四音类似小调，后四音类似大调。

## 调号
按照五度循环律考虑以不同主音自然大调音阶，以C为中心：

    bC bG bD bA bE bB F C G D A E B #F #C

注意有对应重合：

    bC - B
    bG - #F
    bD - #C
称为三组等音调

C调无升降号，自C五度向上，每次增加一个声号，变音也成五度(四度)：FCGDAEB

自C五度向下，每次增加一个降号，变音也成五度(四度)：BEADGAF

### 调式对应
每一个自然大调对应一个自然的自然小调，称为关系大小调，如C自然大调与a自然小调

每个自然大调对应一个同主音的自然小调，称为平行大小调，如C自然大调与c自然小调

仅考虑自然大小调，每个主音可产生2种调式，共12个主音，总共24个调式。

每个调式均五个近关系调：

    X大调：
    X大调的关系小调、属音大调、属音大调的关系小调、下属音大调、下属音大调的关系小调

    x小调：
    x小调的关系大调、属音小调、属音小调的关系大调、下属音小调、下属音小调的关系大调
    
    (我已经不认识"调"这个字了)

注：在五度圈上，这些调离得很近。

## 和弦
### 和弦的产生
至少三个不同音
### 三和弦
根音-三音-五音(冠音)
共如下四种
1) 大三和弦
如CEG Cmaj
2) 小三和弦
如DFA Dm
3) 减三和弦
如BD'F' Bdim
4) 增三和弦
如CEG# Cmaj#
### 七和弦
根音-三音-五音-七音

| 三度结构          | 命名结构    | 名称        | 简称         |
|--------------------|-------------|-------------|--------------|
| 小三 + 小三 + 小三 | 减三、减七  | 减减七和弦  | 减七和弦     |
| 小三 + 小三 + 大三 | 减三、小七  | 减小七和弦  | 半减七和弦   |
| 小三 + 大三 + 小三 | 小三、小七  | 小小七和弦  | 小七和弦     |
| 小三 + 大三 + 大三 | 小三、大七  | 小大七和弦  |              |
| 大三 + 小三 + 小三 | 大三、小七  | 大小七和弦  | 属七和弦     |
| 大三 + 小三 + 大三 | 大三、大七  | 大大七和弦  | 大七和弦     |
| 大三 + 大三 + 小三 | 增三、大七  | 增大七和弦  |              |

### 和弦转位
三和弦有两种转位：
1) 三音转位(第一转位、六和弦)
2) 五音转位(第二转位、四六和弦)

七和弦有三种转位：
1) 三音转位(第一转位、五六和弦)
2) 五音转位(第二转位、三四和弦)
3) 七音转位(第三转位、二和弦)

    注意：和弦转位后根音不变，低音变
### 和弦标记
1) 用罗马数字表示调式内功能音级，根音到三音是大三度则罗马数字大写，否则小写
2) 用上标$^{o}$与$^{+}$表示减、增三和弦，大小三和弦不用加上标
3) 用下标$_{6}$与$_{{6\over 4}(省略分数线)}$表示三和弦第一、第二转位

### 近关系调的等价定义
给定自然调式X(x)，另一个调式Y(y)是X(x)近关系调，若Y(y)的主和弦(I+III+V)是X(x)各级调式内大小三和弦中的一个。

### 正和弦
即一个调式内以I、IV、V为主音的三和弦，主和弦、下属和弦、属和弦。

### 基础和声进行
1) 正格进行 I-V-I
2) 变格进行 I-IV-I
3) 复式进行 I-IV-V-I

注：调性音乐中，所有和弦最终都要解决到 I


# 旋律与对称

## 旋律变换
### 移调
严格移调: 字面意思

调式移调: 确保移调后旋律还在调式内, 即只考虑音名变化

### 对称
倒影: 五线谱上, 按照水平线反转旋律

    倒影也分严格倒影与调式倒影

逆行: 按照垂直线反转旋律, 也即时间倒序

    显然逆行不用考虑是否严格
## 音类空间及其结构
把所有音级划分为等价类, 同音音级, 或者八度关系音级视为一类, 共计12类

$$ \mathscr{PC} = \{\overline{A}, \overline{\#A}, \overline{B}, \overline{C}, \overline{\#C}, \overline{D}, \overline{\#D}, \overline{E}, \overline{F}, \overline{G}, \overline{\#G}\} $$

称为音类空间.

在此集合上定义对应$\sigma$:
$$ \sigma : \mathscr{PC} \longrightarrow \mathbb{Z}/_{12  \mathbb{Z}}$$
$$ \sigma(\overline{C}) = \overline{0} $$
$$ \sigma(\overline{\#C}) = \overline{1} $$
$$...$$

并定义二元运算使得$\sigma$成为简单同构:
$$ + :  \mathscr{PC}\times\mathscr{PC}\longrightarrow\mathscr{PC} $$

$$ \overline{H} + \overline{J} = \sigma^{-1}(\sigma(\overline{H}) + \sigma(\overline{J})) $$


再定义:
$$T_{n} : \mathscr{PC}\longrightarrow\mathscr{PC}, 其中n为整数 $$

$$ T_{n}(\overline{H}) := \overline{H} + \sigma^{-1}(\overline{n})$$

显然

$$ |\{ T_{n} | n \in \mathbb{Z}\}| = 12 $$

$$ 记\mathscr{T} = \{ T_{n} | n \in \mathbb{Z}\}$$

可以定义复合:
$$ *:\mathscr{T} \times\mathscr{T}\longrightarrow\mathscr{T} $$

$$ T_{n} * T_{m} = T_{n + m} $$

$(\mathscr{T}, *)$为交换群, 阶为12

也不难看出$(\mathscr{T}, *)$是循环群, 生成元为$T_{1}$

再定义倒影变换:
$$ I_{0}: \mathscr{PC}\longrightarrow \mathscr{PC} $$
$$ I_{0}(\overline{H}) = -\overline{H}$$
注意, 我们把$\overline{C}$当作$\overline{0}$, 记

$$\mathscr{I} = \{I_{n}|n \in \mathbb{Z}\} $$


扩展定义:
$$* : \mathscr{T}\cup\mathscr{I} \times \mathscr{T}\cup\mathscr{I} \longrightarrow\mathscr{T}\cup\mathscr{I} $$

$$\forall \overline{H} \in\mathscr{PC}, f, g \in\mathscr{T}\cup\mathscr{I} , (f * g)(\overline{H}) = f(g(\overline{H}))$$

记$T = T_{1}$, $I = I_{0}$, 记$\mathscr{D} = span<T, I>$为有限次复合组成的所有可能变换. 不难说明$(\mathscr{D}, *)$为群, 且$(\mathscr{T}, *)$为其子群

有趣的是:
$$\mathscr{D} = \{T^{n}|n \in \mathbb{Z}\} \cup \{T^{n} * I|n \in \mathbb{Z}\}$$

#### 数学定义
对一个正2n边形, 多有过中心轴对称或绕中心旋转的, 能使图形变换后保持不变的操作组成一个群, 称为二面体群, 其上运算为'复合', 即连续操作.

则:
$$\mathscr{D} \cong D_{24}, 即正十二边形的二面体群 $$

注意, 二面体群不是交换群



下面, 我们考虑一列音:
$$\mathbf{H} = (\overline{H_{1}}, \overline{H_{2}}, \overline{H_{3}},..., \overline{H_{n}} )^{T}\in\mathscr{PC}^{n}$$

扩展定义:
$$T(\mathbf{H}) = (T(\overline{H_{1}}), T(\overline{H_{2}}), T(\overline{H_{3}}),..., T(\overline{H_{n}}) )^{T}$$
$$I(\mathbf{H}) = (I(\overline{H_{1}}), I(\overline{H_{2}}), I(\overline{H_{3}}),..., I(\overline{H_{n}}) )^{T}$$
并补充:
$$R(\mathbf{H}) = (\overline{H_{n}}, \overline{H_{n-1}}, \overline{H_{n-2}},..., \overline{H_{1}} )^{T}$$

于是, 这三种$\mathscr{PC}^{n}$上的运算通过复合$*$可以构成更大的群:
$$\mathscr{M} = span<T, I, R> = span<T, I> \times span<R>$$
其中元素形如:
$$T^{n}, T^{n} * I, T^{n} * R, T^{n} * I * R$$

    事实上, n只取0到11

### 音列
如果我们把音类空间$\mathscr{PC}$中所有元素拿出, 并且排成一列, 就构成了音列, 共计12!种, 我们之后用0到11来代替$\mathscr{PC}$中元素, 在0代表的音类确定的情况下, 我们的数字排列一一对应12!种音列.

初始音列(一般0在首位), 所有音同时平移(上升n个半音), 就可以得到移调音列, 每一个主音列可以诱导出12个移调音列(包括主音列)

类似的, 依照第一个音的位置, 我们可以进行倒影和逆行等, 从初始音列出发, 不断进行操作, 可以得到至多48种不同音列.

    注意, 有可能得到重复的, 如从一个半音阶开始, 只能得到24个互异的音列

恰组成了一个音列矩阵

![矩阵](https://github.com/zhuiyy/zhuiyy/blob/main/picture%20bands/%E9%9F%B3%E5%88%97%E7%9F%A9%E9%98%B5.png)

你可以看到, 每一行, 每一列, 正反都可以阅读, 共计48种.

#### 数学定义
$\Omega$为一个集合,G是一些$\Omega$到自身的变换组成的群, 就可以定义轨道:

$$Orb(\alpha) = \{\beta \in \Omega|\exist g \in G s.t. \beta = g(\alpha)\}$$

可见, 从某个初始音列出发得到的至多48个音列就是初始音列在$\mathscr{M}$群作用下的轨道

设一个初始音列$P_{0}$, 考虑其被$\mathscr{M}$作用, 称

$$\mathscr{M}_{P_{0}} = \{f\in\mathscr{M}, |f(P_{0}) = P_{0}\}$$

为$P_{0}$在$\mathscr{M}$作用下的稳定化子.

    可以证明, 如果对于一个P, 其轨道大小不为48, 则必为24, 且稳定化子个数为2.

事实上:

$$|orb(\alpha)| * |G_{\alpha}| = |G|$$

给定音列:
$$P_{0}=(0, a_{1}, a_{2}, ..., a_{11})^{T}$$
$$\exist k\neq 0, I_{k} = R_{0}\iff a_{11}=a{1} + a{10} = ... = a{5} + a{6} = k (mod 12), k为奇数$$
$$\exist k\neq 0, P_{0}= R_{k}\iff a_{11}=a{1} - a{10} = ... = a{5} - a{6} = k (mod 12), k = 6$$

(P是移调, I是倒影, R是移调后逆行, RI是倒影后逆行, 详见上图)

# 音类集合与新黎曼理论
## 音类集合
即$\mathscr{PC}$ 子集, 称为pc集, 并根据最紧凑原则规定记法(标准序, 标准型).

上一讲种$\mathscr{D}$中的所有作用都可以应用在pc集上, 显然应用前后pc集的元素个数不变.

我们也可定义轨道, 稳定化子等概念, 如所有大三和弦存在于一条轨道内.

以下谈到的倒影变换, 可以参考[JacobCollier](https://www.bilibili.com/video/BV1Jq4y1y7Pe/?spm_id_from=333.337.search-card.all.click&vd_source=3b4f8daf13bc1fd1e544f0ef2e666018)的解释.

$T$不改变和弦类型, 但$I$会改变, 如把大三和弦映射为小三和弦, $T^{n}*I$和$I$类似.

可以在群作用$\mathscr{D}$下对所有pc集分类

## 距离与距离向量(注意与节奏型的距离序列区分开)

两个音类, 我们可以定义半音距离, 即在12音圆周上相差的最小半音数. 由此定义的距离最大为6.

此圆周上, 每个n-音类集合可以组成一个凸n边形, 把所有顶点相连, 共$C_{n}^{2}$条边, 这些边的长度定义为顶点音类的距离, 我们在这个音类集合上定义距离向量:

$$\delta = (d_{1}, d_{2}, ..., d_{6})$$
其中, $d_{i}$是长为$i$的边数

## 音类集合的等价类

对于两个音类集合A, B, 若A包含于B, 称A为B字面上的子集合, 若A在某个变换下的像包含于B, 则称A为B抽象的子集合

### 集合类3-11的分析
距离向量为(0, 0, 1, 1, 1, 0)的所有音类集合(24个)均为大三和弦或小三和弦, 构成一个大类, 记为$\mathscr{P}$.

我们用X记以X为根音的大三和弦, x记小三和弦

在$\mathscr{P}$上定义运算:

平行变换:

$$P:\mathscr{P}\longrightarrow\mathscr{P}$$

$$P(X) = x, P(x) = X$$


关系变换:

$$R:\mathscr{P}\longrightarrow\mathscr{P}$$

$$R(X) = x-3, R(x) = X+3$$

    转化为关系大/小调
导音变换:

$$L:\mathscr{P}\longrightarrow\mathscr{P}$$

$$L(X) = x+4, L(x) = X-4$$
    把大三和弦的根音降低半音, 或把小三和弦的冠音升高半音


$$P, R, L$$
统称黎曼变换, 注意这几个变换的像也是3-11类! 而且每个变换只更改一个音.

#### PRL循环(太像CNO循环了)
从一个3-11中的和弦出发, 循环作用PRL, 两轮后开始循环.

每个循环可以画成一个六边形, 于是出现一个音网:

![音网](https://github.com/zhuiyy/zhuiyy/blob/main/picture%20bands/%E9%9F%B3%E7%BD%91.png)

每个六边形的六个顶点, 取交集, 仅余一个音类,可以记在中央:

![音网2](https://github.com/zhuiyy/zhuiyy/blob/main/picture%20bands/%E9%9F%B3%E7%BD%912.png)

发现: 相邻的中央音类构成和谐和声!

如果将相邻中央音类连起来, 将会得到一个由正三角形密铺的图, 有的正三角形代表大三和弦, 有的代表小三和弦, 称为对偶图

小三和弦的三角形方向与大三和弦相反

音网在向外延伸后会重复, 可以绕成一个甜甜圈形状.

#### 新黎曼群
称
$$\mathscr{N} = span<P, R, L>$$
为新黎曼群, 作用在3-11类上.

可以证明:
$$\mathscr{N} = span<R, L>$$
$$(P = R * (L* R)^{3})$$

$$\mathscr{N} \cong D_{24} $$

##### 数学定义
字:

$$G是一个群, 若S为其生成元集合, |S| = k, 则S上的字定义为\{s_{1}^{e_{1}} * s_{2}^{e_{2}} * ... * s_{k}^{e_{k}}|\forall e_{i} = \pm 1\}$$

注:$在\mathscr{N}$中考虑, $e$的正负没有影响.

给定一个字, 就可以按字给出的映射顺序给出一个路径.

# 节奏与数学
## 时值序列
假设16分音符时值单位为1
## 由音级序列生成时值序列
我们可以固定一个音级, 令其等于0, 然后再原音级序列中, 令所有音的时常等于这个音到0的半音数个单位时值!
## 循环左移位
把一个小节(或者一段时间内)的头部时值, 移到尾部, 形成另一种时值序列.

如[1,2,1,2]变为[2,1,2,1]

甚至是[3,2,1,4]变为[2,2,1,4,1]
## 循环等价分类
### 数学定义
若
$$群G = span<\sigma> = \{id, \sigma, \sigma^{2}, ..., \sigma^{11}\}$$
为正12边型旋转群,且$G$可以作用在集合$\Omega$上. 定义$g\in G$的不动点为:
$$fix(g) = \{x\in\Omega|g(x) = x\}$$

且有
#### 定理
$G$是$\Omega$上的置换群, 有$t$条轨道, 则
$$t = {1\over |G|}\sum_{g\in G} |fix(g)|$$
# 附录:碎点
1) 赋格是一种**多声部音乐, 有严格的对位法则**.
2) Aratos三重奏演奏的西藏舞曲\<Tibet dancing\>由**盛宗亮**作曲.
3) 巴赫动机:B-A-C-bB(H)