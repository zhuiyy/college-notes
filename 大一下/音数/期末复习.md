# 随机性
## 随机过程
$\{\xi_{t}|t=0,1,2,3...\}$成为一个随机过程，若所有随机变量$\xi_{t}$共享取值范围$\Omega$.

称$\Omega$为$\xi_{t}$的状态空间，$\Omega$中元素称为状态.

### 马尔可夫性质
若对于任意正整数$n$与$\Omega$中任意$n+2$个状态$k_{i}, i=0,1,2,...,n+1$，有
    
$P\{\xi_{n+1}=k_{n+1}|\xi_{i}=k_{i},\forall i\leqslant n\}=P\{\xi_{n+1}=k_{n+1}|\xi_{n}=k_{n}\}$

即$t=n+1$时刻的状态仅与上一时刻相关，就称这个随机过程有马尔可夫性质，具有马尔可夫性质的随机过程也叫马尔科夫链.

### 时间齐次性
一个马尔科夫链是时间齐次的，若对任意$t$，有

$P\{\xi_{t+2}=y|\xi_{t+1}=x\}=P\{\xi_{t+1}=y|\xi_{t}=x\},\forall x,y\in\Omega$

固定一组$k_{i},k_{j}\in \Omega$，记定值$p\{\xi_{t+1}=k_{j}|\xi_{t}=k_{i}\}$为$p_{ij}$，称作状态$\xi_{i}=k_{i}$到$\xi_{i+1}=k_{j}$的转移概率.

若$|\Omega|=n\in\mathbb{N}^{+}$即$\Omega=\{k_{1},k_{2},...,k_{n}\}$，则$\exist n$级方阵
$$P=(p_{ij})=
\left[
\begin{matrix}
p_{11} & p_{12} & ... & p_{1n} \\
p_{21} & p_{22} & ... & p_{2n} \\
\vdots & \vdots & ... & \vdots \\
p_{n1} & p_{n2} & ... & p_{nn}
\end{matrix}
\right]
$$
称为这个马尔科夫链的概率转移矩阵,显然由定义，知此矩阵每行和为1.

对于一个时间$t$，如果我们已知$\xi_{t}$的概率分布$\gamma_{t}=[p_{1},p_{2},...,p_{n}]^{T}$，则$\xi_{t+1}$的概率分布$\gamma_{t+1}=[p_{1},p_{2},...,p_{n}]P$.

### 高阶马尔科夫链
若将马尔可夫性质放宽为：$n+1$时刻状态仅与前$m$个状态相关，则称此马尔科夫链为$m$阶马尔科夫链.

事实上就是一个单层纯线性神经网络(非全连接)

## 随机音乐的功率谱
### 随机音乐的功率密度
在每个频率上，音乐的功率是一个时间的函数，记为$P_{f_{k}}(t)$，其中$f_{k}$是频段(连续的一段频率区间)，$t$是时间.

对于一段有限且离散的随机音乐，时间$t$仅取离散值，此时$P_{f_{k}}(t)$不是离散函数，我们干脆研究其均值，定义$P_{f_{k}}$为$P_{f_{k}}(t)$在有限时间内的均值. 

此时可以把$P_{f_{k}}$视为$f_{k}$的函数，我们采样多个$f_{k}$，并且令$|f_{k}|$趋近于0，类似概率与概率密度关系，我们得到一个频率值f的函数$P_{f}$，
称为此随机音乐的功率密度谱.

### 白、粉、棕噪声
当$P_{f}\propto{1\over f^{0}}$即$P_{f}$为常数时，此随机音乐称为白噪声

当$P_{f}\propto{1\over f^{1}}$时，称为粉噪声

当$P_{f}\propto{1\over f^{2}}$时，称为棕噪声(布朗噪声)

大量研究表明，生活中的音乐或声音，其频率功率谱大致都满足$P_{f}\propto{1\over f^{\gamma}},0.5<\gamma<1.5$.

### 功率计算
在一个区间内对功率密度谱积分，我们就能得到此区间内的总功率(类似概率密度与概率)

白噪声在一个区间带上的积分正比于带宽

粉噪声在任意八度($f$到$2f$)上积分为定值

### 如何产生1/f音乐

使用3个骰子ABC，每一次选择会按照一个规则投掷某些骰子.

规则是：


# 调式、音阶、和弦
## 调式
### 主音与调式
按照一定规则，围绕某一稳定音级形成的不同音程结构称为一个调式，中心稳定音称为主音。

### 标准循环调式
在一个八度内有的七个不同音级，顺序排列，由低到高称为上行，反之为下行，七个音以后按循环方式平移连接。

其七个不同音级对应：

    I:主音
    II:上主音
    III:中音
    IV:下属音
    V:属音
    VI:下中音
    VII:导音

### 自然大调
如CDEFGABC'

### 自然小调
如ABC'D'E'F'G'A'

### 和声小调
在自然小调的基础上将VII级音升高半音，如
ABC'D'E'F'G#'A'

### 旋律小调
上行：在和声小调的基础上把VI级音升高半音，如ABC'D'E'F#'G#'A'

下行：恢复为自然小调，如A'G'F'E'D'C'BA

旋律小调的上行前三音类似小调，后四音类似大调。

## 调号
按照五度循环律考虑以不同主音自然大调音阶，以C为中心：

    bC bG bD bA bE bB F C G D A E B #F #C

注意有对应重合：

    bC - B
    bG - #F
    bD - #C
称为三组等音调

C调无升降号，自C五度向上，每次增加一个声号，变音也成五度(四度)：FCGDAEB

自C五度向下，每次增加一个降号，变音也成五度(四度)：BEADGAF

### 调式对应
每一个自然大调对应一个自然的自然小调，称为关系大小调，如C自然大调与a自然小调

每个自然大调对应一个同主音的自然小调，称为平行大小调，如C自然大调与c自然小调

仅考虑自然大小调，每个主音可产生2种调式，共12个主音，总共24个调式。

每个调式均五个近关系调：

    X大调：
    X大调的关系小调、属音大调、属音大调的关系小调、下属音大调、下属音大调的关系小调

    x小调：
    x小调的关系大调、属音小调、属音小调的关系大调、下属音小调、下属音小调的关系大调
    
    (已经不认识"调"这个字了)

注：在五度圈上，这些调离得很近。

## 和弦
### 和弦的产生
至少三个不同音
### 三和弦
根音-三音-五音(冠音)
共如下四种
1) 大三和弦
如CEG Cmaj
2) 小三和弦
如DFA Dm
3) 减三和弦
如BD'F' Bdim
4) 增三和弦
如CEG# Cmaj#
### 七和弦
根音-三音-五音-七音

| 三度结构          | 命名结构    | 名称        | 简称         |
|--------------------|-------------|-------------|--------------|
| 小三 + 小三 + 小三 | 减三、减七  | 减减七和弦  | 减七和弦     |
| 小三 + 小三 + 大三 | 减三、小七  | 减小七和弦  | 半减七和弦   |
| 小三 + 大三 + 小三 | 小三、小七  | 小小七和弦  | 小七和弦     |
| 小三 + 大三 + 大三 | 小三、大七  | 小大七和弦  |              |
| 大三 + 小三 + 小三 | 大三、小七  | 大小七和弦  | 属七和弦     |
| 大三 + 小三 + 大三 | 大三、大七  | 大大七和弦  | 大七和弦     |
| 大三 + 大三 + 小三 | 增三、大七  | 增大七和弦  |              |

### 和弦转位
三和弦有两种转位：
1) 三音转位(第一转位、六和弦)
2) 五音转位(第二转位、四六和弦)

七和弦有三种转位：
1) 三音转位(第一转位、五六和弦)
2) 五音转位(第二转位、三四和弦)
3) 七音转位(第三转位、二和弦)

### 和弦标记
1) 用罗马数字表示调式内功能音级
2) 用上标$^{o}$与$^{+}$表示减、增三和弦，大小三和弦不用加上标
3) 用下标$_{6}$与$_{{6\over 4}(省略分数线)}$表示三和弦第一、第二转位

### 近关系调的等价定义
给定自然调式X(x)，另一个调式Y(y)是X(x)近关系调，若Y(y)的主和弦(I+III+V)是X(x)各级调式内大小三和弦中的一个。

### 正和弦
即一个调式内以I、IV、V为主音的三和弦，主和弦、下属和弦、属和弦。

### 基础和声进行
1) 正格进行 I-V-I
2) 变格进行 I-IV-I
3) 复式进行 I-IV-V-I

注：调性音乐中，所有和弦最终都要解决到I
    

